# v1.3.0 CLI Command Reference

Complete reference for new CLI commands in UAIDE v1.3.0.

---

## üîç Bloat Detection Commands

### `uaide bloat detect`

Detect bloat in your project (unnecessary files, example code, unused dependencies).

**Usage:**
```bash
uaide bloat detect [OPTIONS]
```

**Options:**
- `-p, --project PATH` - Project path (default: current directory)

**Example:**
```bash
# Detect bloat in current project
uaide bloat detect

# Detect bloat in specific project
uaide bloat detect --project /path/to/project
```

**Output Categories:**
- `unnecessary_files` - OS-specific and temp files
- `example_code` - Example/demo/sample code
- `unused_dependencies` - Unused packages
- `redundant_code` - Duplicate functions
- `empty_files` - Empty or nearly empty files
- `bloat_comments` - Bloat-indicating comments

---

### `uaide bloat clean`

Clean detected bloat with safety checks.

**Usage:**
```bash
uaide bloat clean [OPTIONS]
```

**Options:**
- `-p, --project PATH` - Project path (default: current directory)
- `--auto` - Auto-approve low-risk items (no confirmation)

**Example:**
```bash
# Clean with confirmation
uaide bloat clean

# Auto-clean low-risk items
uaide bloat clean --auto

# Clean specific project
uaide bloat clean --project /path/to/project --auto
```

**Risk Levels:**
- **Low** - Auto-approved with `--auto` flag
- **Medium** - Requires manual confirmation
- **High** - Always requires manual review

---

## üìä Code Quality Commands

### `uaide quality check`

Check code quality for project or specific file.

**Usage:**
```bash
uaide quality check [OPTIONS]
```

**Options:**
- `-p, --project PATH` - Project path (default: current directory)
- `-f, --file PATH` - Check specific file

**Example:**
```bash
# Check entire project
uaide quality check

# Check specific file
uaide quality check --file src/main.py

# Check specific project
uaide quality check --project /path/to/project
```

**Issue Types:**
- `file_too_long` - File exceeds 500 lines
- `function_too_long` - Function exceeds 50 lines
- `high_complexity` - Cyclomatic complexity > 10
- `deep_nesting` - Nesting depth > 4
- `god_class` - Class with > 20 methods
- `missing_docstring` - Missing documentation

**Severity Levels:**
- ‚óã Low
- ‚óê Medium
- ‚óè High
- ‚úó Critical

---

### `uaide quality report`

Generate comprehensive quality report with score.

**Usage:**
```bash
uaide quality report [OPTIONS]
```

**Options:**
- `-p, --project PATH` - Project path (default: current directory)

**Example:**
```bash
# Generate quality report
uaide quality report

# Report for specific project
uaide quality report --project /path/to/project
```

**Report Includes:**
- Quality score (0-100)
- Total files with issues
- Issues by severity
- Files needing refactoring
- Refactoring suggestions

---

## üß† Context Management Commands

### `uaide context status`

Show current context usage and statistics.

**Usage:**
```bash
uaide context status
```

**Example:**
```bash
uaide context status
```

**Output:**
- Total context items
- Token usage
- Available tokens
- Usage percentage
- Items by type
- Items by priority
- Warnings if pruning needed

---

### `uaide context prune`

Prune old or low-relevance context items.

**Usage:**
```bash
uaide context prune [OPTIONS]
```

**Options:**
- `--age HOURS` - Maximum age in hours (default: 24.0)
- `--relevance SCORE` - Minimum relevance score (default: 0.3)

**Example:**
```bash
# Prune with defaults
uaide context prune

# Prune items older than 12 hours
uaide context prune --age 12

# Prune items with relevance < 0.5
uaide context prune --relevance 0.5

# Combine both
uaide context prune --age 6 --relevance 0.4
```

**Pruning Strategy:**
1. Remove items older than specified age
2. Remove items below relevance threshold
3. Keep high-priority items (priority >= 3)

---

## üóÇÔ∏è Codebase Indexing Commands

### `uaide index build`

Build or rebuild codebase index for fast search.

**Usage:**
```bash
uaide index build [OPTIONS]
```

**Options:**
- `-p, --project PATH` - Project path (default: current directory)
- `--incremental` - Only index changed files

**Example:**
```bash
# Full index build
uaide index build

# Incremental update
uaide index build --incremental

# Index specific project
uaide index build --project /path/to/project
```

**Indexed Information:**
- File structure
- Classes and methods
- Functions and parameters
- Import statements
- Dependency graph

**Output:**
- Files indexed
- Total classes
- Total functions
- Dependencies found
- Duration

**Index File:** `.uaide_index.json` (saved in project root)

---

### `uaide index search`

Search for symbols (classes, functions, files).

**Usage:**
```bash
uaide index search SYMBOL [OPTIONS]
```

**Arguments:**
- `SYMBOL` - Symbol name to search for

**Options:**
- `-p, --project PATH` - Project path (default: current directory)

**Example:**
```bash
# Search for class
uaide index search MyClass

# Search for function
uaide index search my_function

# Search in specific project
uaide index search MyClass --project /path/to/project
```

**Search Results:**
- Classes with matching name
- Functions with matching name
- Files with matching name
- Location (file:line)

---

### `uaide index analyze`

Analyze project structure and dependencies.

**Usage:**
```bash
uaide index analyze [OPTIONS]
```

**Options:**
- `-p, --project PATH` - Project path (default: current directory)

**Example:**
```bash
# Analyze current project
uaide index analyze

# Analyze specific project
uaide index analyze --project /path/to/project
```

**Analysis Includes:**
- Total files and lines
- Files by language
- Largest files
- Circular dependencies
- Project structure summary

---

## üîó Command Chaining Examples

### Complete Project Health Check

```bash
# 1. Check for bloat
uaide bloat detect

# 2. Check code quality
uaide quality report

# 3. Build index
uaide index build

# 4. Analyze structure
uaide index analyze

# 5. Check context
uaide context status
```

### Automated Cleanup Workflow

```bash
# 1. Detect and auto-clean bloat
uaide bloat clean --auto

# 2. Check quality after cleanup
uaide quality check

# 3. Rebuild index
uaide index build --incremental
```

### Development Workflow

```bash
# 1. Build index for fast navigation
uaide index build

# 2. Search for symbol
uaide index search MyClass

# 3. Check quality before commit
uaide quality check --file src/myfile.py

# 4. Prune context if needed
uaide context prune
```

---

## üéØ Best Practices

### Regular Maintenance

Run these commands regularly:

```bash
# Daily: Check quality
uaide quality report

# Weekly: Clean bloat
uaide bloat detect
uaide bloat clean --auto

# Monthly: Full analysis
uaide index build
uaide index analyze
```

### Pre-Commit Checks

```bash
# Before committing
uaide quality check
uaide bloat detect
```

### Large Codebase Management

```bash
# Initial setup
uaide index build

# Regular updates
uaide index build --incremental

# Context management
uaide context prune --age 6
```

---

## ‚öôÔ∏è Configuration

### Quality Thresholds

Default thresholds (can be customized in code):
- Max file lines: 500
- Max function lines: 50
- Max complexity: 10
- Max nesting depth: 4

### Context Budget

Default budget:
- Max tokens: 8000
- Reserved tokens: 1000
- Warning threshold: 80%
- Critical threshold: 95%

### Indexing

Supported file types:
- Python (.py)
- JavaScript (.js, .jsx)
- TypeScript (.ts, .tsx)
- Java (.java)
- C# (.cs)
- C/C++ (.c, .cpp, .h, .hpp)
- Go (.go)
- Rust (.rs)

---

## üêõ Troubleshooting

### "No index found"

Build the index first:
```bash
uaide index build
```

### "Context usage is CRITICAL"

Prune context immediately:
```bash
uaide context prune --age 1 --relevance 0.5
```

### "Permission denied" during cleanup

Run with appropriate permissions or use `--auto` flag for low-risk items only.

---

## üìö Related Documentation

- [User Guide](USER_GUIDE.md)
- [API Reference](API.md)
- [v1.3.0 Implementation Progress](Implementations/V1.3.0_IMPLEMENTATION_PROGRESS.md)
- [Roadmap v1.3.0](ROADMAP_v1.3.0.md)

---

**All commands support `--help` for detailed information:**

```bash
uaide bloat --help
uaide quality --help
uaide context --help
uaide index --help
```
